<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Khu V∆∞·ªùn Tri Th·ª©c L·ªõp 1</title>
    <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&family=Nunito:wght@600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            /* B·∫£ng m√†u B·∫ßu tr·ªùi & V∆∞·ªùn hoa */
            --sky-top: #4FC3F7; /* Xanh da tr·ªùi s√°ng */
            --sky-bottom: #81D4FA;
            --grass-light: #AED581; /* Xanh l√° m·∫° */
            --grass-dark: #7CB342; /* Xanh c·ªè ƒë·∫≠m */
            --soil-brown: #8D6E63; /* M√†u ƒë·∫•t/g·ªó */
            
            --flower-yellow: #FFEB3B;
            --flower-orange: #FF9800;
            --flower-pink: #F06292;
            --flower-blue: #4DD0E1;
            
            --text-dark: #33691E; /* M√†u ch·ªØ xanh r√™u ƒë·∫≠m cho d·ªÖ ƒë·ªçc tr√™n n·ªÅn s√°ng */
            --text-brown: #5D4037;

            --font-heading: 'Patrick Hand', cursive;
            --font-body: 'Nunito', sans-serif;

            --radius-organic: 20px 30px 20px 30px; /* Bo g√≥c ki·ªÉu t·ª± nhi√™n */
            --shadow-pop: 0 8px 0px rgba(0,0,0,0.15);
        }

        body {
            font-family: var(--font-body);
            /* N·ªÅn gradient t·ª´ b·∫ßu tr·ªùi xu·ªëng th·∫£m c·ªè */
            background: linear-gradient(to bottom, var(--sky-top) 0%, var(--sky-bottom) 40%, var(--grass-light) 80%, var(--grass-dark) 100%);
            color: var(--text-dark);
            line-height: 1.6;
            padding: 30px 15px;
            margin: 0;
            min-height: 100vh;
            /* Th√™m h·ªça ti·∫øt n·ªÅn m√¢y v√† hoa tr√¥i n·ªïi */
            background-image: 
                url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Ctext x='10' y='30' font-size='20'%3E‚òÅÔ∏è%3C/text%3E%3Ctext x='60' y='70' font-size='20'%3Eüå∏%3C/text%3E%3C/svg%3E");
            background-attachment: fixed;
        }

        .container {
            max-width: 850px;
            margin: 0 auto;
            background-color: #FFFBEE; /* N·ªÅn kem s√°ng */
            padding: 40px;
            border-radius: 30px;
            /* Vi·ªÅn gi·∫£ g·ªó */
            border: 5px solid var(--soil-brown);
            box-shadow: 0 15px 30px rgba(0,0,0,0.2), inset 0 0 20px rgba(141, 110, 99, 0.1);
            position: relative;
            overflow: visible;
        }

        /* Trang tr√≠ g√≥c container b·∫±ng d√¢y leo v√† n·∫•m */
        .container::before {
            content: 'üçÑüåø';
            position: absolute;
            bottom: -20px;
            left: -15px;
            font-size: 3em;
            transform: rotate(-15deg);
            z-index: 1;
        }
        .container::after {
            content: 'üåªüêù';
            position: absolute;
            top: -25px;
            right: -15px;
            font-size: 3em;
            transform: rotate(15deg);
            z-index: 1;
        }

        h1 {
            text-align: center;
            font-family: var(--font-heading);
            color: var(--text-brown);
            font-weight: 800;
            font-size: 3em;
            margin-bottom: 35px;
            text-shadow: 2px 2px 0px var(--flower-yellow);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        h1::before { content: 'üåà'; }
        h1::after { content: 'üå∑'; }

        /* Th·∫ª th√¥ng tin h·ªçc sinh - B·∫£ng g·ªó */
        .student-info-card {
            background-color: #EFEBE9;
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 40px;
            border: 3px dashed var(--soil-brown);
            box-shadow: 5px 5px 0px rgba(93, 64, 55, 0.1);
        }

        .student-info-card h3 {
            margin-top: 0;
            font-family: var(--font-heading);
            color: var(--text-brown);
            font-size: 1.8em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }
        .student-info-card h3::before { content: 'üè° '; margin-right: 10px; }

        .input-group label {
            display: block;
            font-weight: 800;
            margin-bottom: 8px;
            color: var(--text-brown);
            font-family: var(--font-heading);
            font-size: 1.2em;
        }

        .input-group input {
            width: 100%;
            padding: 14px 16px;
            border: 3px solid var(--grass-light);
            border-radius: 15px;
            font-size: 1.1em;
            font-family: var(--font-body);
            box-sizing: border-box;
            outline: none;
            background: #FFFFFF;
            transition: all 0.3s ease;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
        }

        .input-group input:focus {
            border-color: var(--grass-dark);
            background-color: #F1F8E9;
        }

        /* Th·∫ª c√¢u h·ªèi - Lu·ªëng hoa */
        .question-card {
            background: #FFFFFF;
            margin-bottom: 35px;
            padding: 30px;
            border-radius: var(--radius-organic);
            border: 3px solid #C5E1A5;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            position: relative;
        }
        
        /* H·ªça ti·∫øt l√° ch√¨m */
        .question-card::after {
            content: 'üçÉ';
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 2em;
            opacity: 0.2;
            transform: rotate(45deg);
        }

        .question-title {
            font-family: var(--font-heading);
            font-weight: 800;
            font-size: 1.5em;
            margin-bottom: 20px;
            color: var(--text-brown);
            display: flex;
            gap: 10px;
        }
        .question-title::before { content: 'üå±'; }

        .poem-text {
            font-family: var(--font-heading);
            font-size: 1.3em;
            font-style: italic;
            background-color: #F9FBE7; /* N·ªÅn v√†ng chanh nh·∫°t */
            padding: 20px;
            border-radius: 20px;
            border: 2px dotted var(--grass-dark);
            margin: 20px 0;
            color: #558B2F;
            position: relative;
        }

        .image-placeholder {
            width: 100%;
            border-radius: 20px;
            overflow: hidden;
            margin-bottom: 20px;
            text-align: center;
            background-color: #F1F8E9;
            padding: 12px;
            border: 3px solid #DCEDC8;
            box-sizing: border-box;
        }
        
        .image-placeholder img {
            max-width: 100%;
            height: auto;
            display: block;
            border-radius: 12px;
            margin: 0 auto;
        }

        /* Danh s√°ch ƒë√°p √°n - H√¨nh chi·∫øc l√° */
        .options-list {
            list-style-type: none;
            padding: 0;
            display: grid;
            gap: 15px;
        }

        .option-label {
            display: flex;
            align-items: center;
            padding: 16px 22px;
            background-color: #F1F8E9;
            border: 2px solid var(--grass-light);
            /* Bo g√≥c h√¨nh chi·∫øc l√° */
            border-radius: 15px 40px 15px 40px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 700;
            color: var(--text-dark);
            position: relative;
        }

        .option-label:hover {
            background-color: #DCEDC8;
            transform: scale(1.02) rotate(-1deg);
            border-color: var(--grass-dark);
        }
        
        /* Hi·ªáu ·ª©ng ch·ªçn: N·ªü hoa */
        input[type="radio"]:checked + span::before {
             content: 'üå∫ ';
        }
        
        .option-label:has(input[type="radio"]:checked) {
            background-color: #F8BBD0; /* H·ªìng ph·∫•n */
            border-color: var(--flower-pink);
            color: #880E4F;
        }

        input[type="radio"] {
            margin-right: 15px;
            transform: scale(1.5);
            accent-color: var(--flower-pink);
            cursor: pointer;
        }

        /* S·∫Øp x·∫øp ch·ªØ - Khu v∆∞·ªùn nh·ªè */
        .arrange-container {
            margin-top: 25px;
            background: #FFF8E1; /* N·ªÅn ƒë·∫•t v√†ng nh·∫°t */
            padding: 25px;
            border-radius: 25px;
            border: 3px dotted var(--flower-orange);
            position: relative;
        }
        
        .arrange-label {
            font-family: var(--font-heading);
            font-weight: 800;
            color: var(--text-brown);
            margin-bottom: 12px;
            display: block;
            font-size: 1.2em;
        }

        .letters-pool, .answer-box {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            padding: 18px;
            min-height: 70px;
            border-radius: 20px;
            margin-bottom: 25px;
            align-items: center;
        }

        .letters-pool {
            background-color: #FFECB3; /* T√∫i h·∫°t gi·ªëng m√†u v√†ng cam */
            border: 2px dashed var(--flower-orange);
        }
        .letters-pool::before { content: 'üå∞ T√∫i h·∫°t gi·ªëng'; position: absolute; top: -12px; right: 20px; background: #FFF; padding: 2px 8px; border-radius: 10px; font-size: 0.9em; border: 1px solid var(--flower-orange);}


        .answer-box {
            background-color: #D7CCC8; /* M√†u ƒë·∫•t */
            border: 3px solid var(--soil-brown);
            box-shadow: inset 0 0 15px rgba(0,0,0,0.1);
        }
        .answer-box::before { content: 'ü™¥ Ch·∫≠u c√¢y'; position: absolute; top: -12px; right: 20px; background: #FFF; padding: 2px 8px; border-radius: 10px; font-size: 0.9em; border: 1px solid var(--soil-brown);}


        .letter-tile {
            display: inline-flex;
            justify-content: center;
            align-items: center;
            width: 55px;
            height: 55px;
            /* H√¨nh m·∫ßm c√¢y tr√≤n */
            background: linear-gradient(135deg, #AED581, #7CB342);
            color: #FFF;
            font-size: 1.6em;
            font-family: var(--font-heading);
            font-weight: 800;
            border: 3px solid #558B2F;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 4px 0px #33691E;
            user-select: none;
            transition: all 0.2s;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .letter-tile:hover {
            transform: translateY(-3px);
        }

        .letter-tile:active {
            transform: translateY(2px);
            box-shadow: 0 1px 0px #33691E;
        }

        .correct-text-msg {
            color: var(--grass-dark);
            font-weight: 800;
            margin-top: 15px;
            display: none;
            font-size: 1.1em;
            text-align: center;
        }
        .correct-text-msg::before { content: 'üéâ C√¢y ƒë√£ n·ªü hoa: üå∏ '; }

        /* Highlight ƒê√∫ng/Sai - R·ª±c r·ª° h∆°n */
        .correct-answer {
            background-color: #C8E6C9 !important;
            border-color: #2E7D32 !important;
            color: #1B5E20 !important;
            box-shadow: 0 0 15px #C8E6C9;
        }
        
        .wrong-answer {
            background-color: #FFCDD2 !important; 
            border-color: #C62828 !important;
            color: #B71C1C !important;
        }

        /* N√∫t ch·ª©c nƒÉng - B√¥ng hoa kh·ªïng l·ªì */
        .btn {
            display: block;
            width: 100%;
            padding: 20px;
            font-size: 1.5em;
            font-family: var(--font-heading);
            font-weight: 800;
            color: white;
            border: none;
            border-radius: 60px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 45px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .submit-btn {
            /* Hoa h∆∞·ªõng d∆∞∆°ng */
            background: linear-gradient(to bottom, var(--flower-yellow), var(--flower-orange));
            box-shadow: 0 8px 0px #E65100, 0 15px 20px rgba(230, 81, 0, 0.4);
            color: #5D4037;
        }

        .submit-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 0px #E65100, 0 20px 30px rgba(230, 81, 0, 0.5);
        }
        .submit-btn:active { transform: translateY(4px); box-shadow: 0 2px 0px #E65100; }

        .reset-btn {
            /* Hoa xanh d∆∞∆°ng/T∆∞·ªõi n∆∞·ªõc */
            background: linear-gradient(to bottom, var(--flower-blue), #0288D1);
            box-shadow: 0 8px 0px #01579B, 0 15px 20px rgba(1, 87, 155, 0.4);
            display: none; 
        }

        .reset-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 0px #01579B, 0 20px 30px rgba(1, 87, 155, 0.5);
        }
        .reset-btn:active { transform: translateY(4px); box-shadow: 0 2px 0px #01579B; }
        
        .loading {
            opacity: 0.8;
            pointer-events: none;
            background: #B0BEC5 !important;
            box-shadow: none !important;
            color: #546E7A !important;
        }

        /* Khung k·∫øt qu·∫£ - B·∫£ng vinh danh v∆∞·ªùn hoa */
        #result-box {
            display: none;
            margin-top: 60px;
            padding: 40px;
            background-color: #FFF9C4; /* V√†ng kem */
            border-radius: 30px;
            border: 5px solid var(--flower-yellow);
            text-align: center;
            box-shadow: 0 10px 30px rgba(255, 235, 59, 0.3);
            position: relative;
        }
        #result-box::before {
            content: 'üëë';
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 4em;
            z-index: 2;
        }

        #result-box h2 {
            margin-top: 20px;
            font-family: var(--font-heading);
            color: #F57F17;
            font-size: 2.5em;
            font-weight: 900;
            margin-bottom: 30px;
        }

        .result-stat {
            font-size: 1.3em;
            padding: 15px 25px;
            background: #FFFFFF;
            border-radius: 20px;
            font-weight: 700;
            color: var(--text-brown);
            border: 3px solid var(--grass-light);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .result-stat span:first-child { font-size: 1.5em; margin-right: 15px; }
        
        .score-highlight {
            color: var(--flower-pink);
            font-weight: 900;
            font-size: 1.4em;
        }

        @media (max-width: 600px) {
            body { padding: 15px 10px; }
            .container { padding: 30px 20px; border-width: 3px; }
            h1 { font-size: 2em; flex-direction: column; gap: 5px; }
            .btn { font-size: 1.2em; padding: 15px; }
            .letter-tile { width: 45px; height: 45px; font-size: 1.3em; }
            .result-stat { flex-direction: column; gap: 10px; text-align: center; }
            .result-stat span:first-child { margin-right: 0; }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Khu V∆∞·ªùn Tri Th·ª©c L·ªõp 1</h1>

    <div class="student-info-card">
        <h3>Th√¥ng tin B√°c l√†m v∆∞·ªùn nh√≠</h3>
        <div class="input-group">
            <label for="studentName">H·ªç v√† t√™n c·ªßa em:</label>
            <input type="text" id="studentName" placeholder="Nh·∫≠p h·ªç v√† t√™n..." required>
        </div>
        <div class="input-group">
            <label for="studentClass">L·ªõp:</label>
            <input type="text" id="studentClass" placeholder="Nh·∫≠p t√™n l·ªõp..." required>
        </div>
    </div>

    <div id="quiz-container"></div>
    
    <button id="submitBtn" class="btn submit-btn" onclick="submitQuiz()">üåª N·ªôp B√†i & Thu Ho·∫°ch üåª</button>
    <button id="resetBtn" class="btn reset-btn" onclick="resetQuiz()">üí¶ T∆∞·ªõi N∆∞·ªõc & L√†m L·∫°i üí¶</button>
    
    <div id="result-box"></div>
</div>

<script>
    // ‚úÖ URL G·ª≠i ƒëi·ªÉm tr·ª±c ti·∫øp v·ªÅ Google Sheets c·ªßa b·∫°n (ƒê√É ƒê∆Ø·ª¢C GI·ªÆ NGUY√äN)
    const scriptURL = 'https://script.google.com/macros/s/AKfycbxRA-yjp6i3c1FkUygNdWfGifXgLOV6UAPp3fB4MjjTZCvKLakwUcSJTrrrCWDpSgcD/exec'; 

    const quizData = [
        {
            id: 1, type: "multiple",
            text: "Nh·ªØng chi·∫øn sƒ© b·∫£o v·ªá t·ªï qu·ªëc c√≤n ƒë∆∞·ª£c g·ªçi l√† g√¨?",
            options: ["A. gi√°o vi√™n", "B. kƒ© s∆∞", "C. b·ªô ƒë·ªôi", "D. c·∫ßu th·ªß"],
            answer: 2
        },
        {
            id: 2, type: "multiple",
            text: "ƒê√°p √°n n√†o d∆∞·ªõi ƒë√¢y ch·ªâ g·ªìm c√°c t·ª´ ng·ªØ ch·ªâ trang ph·ª•c?",
            options: [
                "A. ƒë√¥i d√©p, th·∫Øt l∆∞ng, b√≥ hoa", 
                "B. qu·∫ßn v·∫£i, ƒë√¥i gi√†y, trang tr√≠", 
                "C. √°o kho√°c, m≈© len, khƒÉn qu√†ng", 
                "D. ƒë√¥i t·∫•t, gƒÉng tay, ph·ª•c v·ª•"
            ],
            answer: 2
        },
        {
            id: 3, type: "multiple",
            text: "Kh·ªï th∆° d∆∞·ªõi ƒë√¢y nh·∫Øc ƒë·∫øn d·∫•u thanh n√†o?<br><div class='poem-text'>D·∫•u n√†o c≈©ng n·ªïi tr√™n<br>Ri√™ng em th√¨ ch√¨m d∆∞·ªõi<br>M·ªçi ng∆∞·ªùi ƒë·ª´ng ch√™ em<br>Tuy nh·ªè nh∆∞ng n·∫∑ng k√≠.</div>(Nguy·ªÖn L√£m Th·∫Øng)",
            options: ["A. d·∫•u huy·ªÅn", "B. d·∫•u ng√£", "C. d·∫•u n·∫∑ng", "D. d·∫•u h·ªèi"],
            answer: 2
        },
        {
            id: 4, type: "multiple",
            text: "\"T√™ gi√°c\" c√≥ th·ªÉ gh√©p v·ªõi ƒë√°p √°n n√†o ƒë·ªÉ t·∫°o th√†nh c√¢u ƒë√∫ng?",
            options: [
                "A. nh·∫∑t th√≥c tr√™n s√¢n", 
                "B. s·ªëng trong khu r·ª´ng", 
                "C. ·∫•p tr·ª©ng trong t·ªï", 
                "D. m√≤ c√° tr√™n ƒë·ªìng"
            ],
            answer: 1
        },
        {
            id: 5, type: "multiple",
            imageText: "<img src='image/cau5.jpg' alt='H√¨nh ·∫£nh ƒë√†n ong' style='max-width: 100%; height: auto;'>",
            text: "C√¢u n√†o m√¥ t·∫£ ƒë√∫ng h√¨nh ·∫£nh sau?",
            options: [
                "A. Nh·ªØng ch√∫ ong chƒÉm ch·ªâ t√¨m m·∫≠t trong v∆∞·ªùn.", 
                "B. Nh·ªØng ch√∫ b∆∞·ªõm ƒëang h√∫t m·∫≠t trong v∆∞·ªùn.", 
                "C. Nh·ªØng ch√∫ chim ƒëang ki·∫øm ƒÉn trong v∆∞·ªùn.", 
                "D. Nh·ªØng ch√∫ ong v√†ng ƒëang l√†m t·ªï trong v∆∞·ªùn."
            ],
            answer: 0
        },
        {
            id: 6, type: "multiple",
            text: "Ch·ªçn v·∫ßn th√≠ch h·ª£p ƒëi·ªÅn v√†o ch·ªó tr·ªëng.<br>C√°c t·ª´ ng·ªØ \"bi·∫øt ∆°n\", \"ti·∫øt h·ªçc\", \"th√¢n thi·∫øt\", \"vi·∫øt ch·ªØ\" c√≥ chung v·∫ßn .....",
            options: ["A. i√™n", "B. i√™t", "C. i√™c"],
            answer: 1
        },
        {
            id: 7, type: "multiple",
            text: "L·ªõp 1B c√≥ m·ªôt b·∫°n h·ªçc sinh m·ªõi chuy·ªÉn ƒë·∫øn. B·∫°n ·∫•y c√≥ v·∫ª nh√∫t nh√°t v√† ch∆∞a quen ai. C√¥ gi√°o nh·ªù l·ªõp tr∆∞·ªüng ra l√†m quen v·ªõi b·∫°n. B·∫°n l·ªõp tr∆∞·ªüng n√™n n√≥i g√¨?",
            options: [
                "A. Ch√†o c·∫≠u, t·ªõ l√† l·ªõp tr∆∞·ªüng. R·∫•t vui ƒë∆∞·ª£c l√†m quen v·ªõi c·∫≠u. C·∫≠u c√≥ c·∫ßn t·ªõ gi√∫p g√¨ kh√¥ng?", 
                "B. T·∫°i sao c·∫≠u l·∫°i chuy·ªÉn ƒë·∫øn tr∆∞·ªùng n√†y v·∫≠y?", 
                "C. Nh√¨n c·∫≠u c√≥ v·∫ª √≠t n√≥i nh·ªâ.", 
                "D. C·∫≠u c√≥ bi·∫øt l√†m b√†i t·∫≠p to√°n h√¥m qua kh√¥ng?"
            ],
            answer: 0
        },
        {
            id: 8, type: "multiple",
            imageText: "<img src='image/cau8.jpg' alt='H√¨nh ·∫£nh c√°c con v·∫≠t' style='max-width: 100%; height: auto;'>",
            text: "Trong h√¨nh ·∫£nh tr√™n c√≥ ...... con v·∫≠t c√≥ t√™n ch·ª©a v·∫ßn \"√¢u\"?",
            options: ["A. 1", "B. 2", "C. 3", "D. 4"],
            answer: 1
        },
        {
            id: 9, type: "multiple",
            text: "Ch·ªçn ch·ªØ th√≠ch h·ª£p l·∫ßn l∆∞·ª£t ƒëi·ªÅn v√†o ch·ªó tr·ªëng sau:<br>Th·ªùi ti·∫øt m√πa ƒë√¥ng [...]·∫•t l·∫°nh [...]√°.",
            options: ["A. r- r", "B. gi- d", "C. r- gi", "D. gi - gi"],
            answer: 2 
        },
        {
            id: 10, type: "multiple",
            // ‚úÖ ƒê√£ c·∫≠p nh·∫≠t ·∫£nh SVG v·ªõi ƒë√∫ng 4 d√≤ng ph√©p t√≠nh b·∫°n y√™u c·∫ßu
            imageText: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 350 280" width="100%" style="background-color: #1e392a; border-radius: 12px; border: 6px solid #bda88a; max-width: 400px; margin: 0 auto; display: block; box-shadow: inset 0 0 10px rgba(0,0,0,0.5);">
                <style>
                    .op { font-family: 'Nunito', sans-serif; font-size: 32px; fill: white; font-weight: bold; text-anchor: middle; dominant-baseline: middle; }
                    .res { font-family: 'Nunito', sans-serif; font-size: 32px; fill: white; font-weight: bold; dominant-baseline: middle; }
                    .shape { stroke-width: 4; fill: rgba(255,255,255,0.05); }
                    .circle { stroke: #FFb3ba; }
                    .square { stroke: #bae1ff; }
                    .triangle { stroke: #baffc9; }
                </style>
                <circle cx="80" cy="45" r="20" class="shape circle"/>
                <text x="140" y="50" class="op">+</text>
                <circle cx="200" cy="45" r="20" class="shape circle"/>
                <text x="250" y="50" class="op">=</text>
                <text x="280" y="50" class="res">14</text>
                
                <circle cx="80" cy="110" r="20" class="shape circle"/>
                <text x="140" y="115" class="op">+</text>
                <rect x="180" y="90" width="40" height="40" rx="4" class="shape square"/>
                <text x="250" y="115" class="op">=</text>
                <text x="280" y="115" class="res">10</text>
                
                <rect x="60" y="155" width="40" height="40" rx="4" class="shape square"/>
                <text x="140" y="180" class="op">+</text>
                <polygon points="200,150 176,195 224,195" stroke-linejoin="round" class="shape triangle"/>
                <text x="250" y="180" class="op">=</text>
                <text x="280" y="180" class="res">8</text>
                
                <polygon points="80,215 56,260 104,260" stroke-linejoin="round" class="shape triangle"/>
                <text x="140" y="245" class="op">+</text>
                <circle cx="200" cy="240" r="20" class="shape circle"/>
                <text x="250" y="245" class="op">=</text>
                <text x="280" y="245" class="res">12</text>
            </svg>`,
            text: "D·ª±a v√†o c√°c ph√©p t√≠nh tr√™n, h√¨nh tam gi√°c, h√¨nh vu√¥ng v√† h√¨nh tr√≤n c√≥ gi√° tr·ªã l√† bao nhi√™u?",
            options: [
                "A. Tam gi√°c: 5, H√¨nh vu√¥ng: 3, H√¨nh tr√≤n: 7", 
                "B. Tam gi√°c: 3, H√¨nh vu√¥ng: 5, H√¨nh tr√≤n: 7", 
                "C. Tam gi√°c: 7, H√¨nh vu√¥ng: 3, H√¨nh tr√≤n: 5", 
                "D. Tam gi√°c: 5, H√¨nh vu√¥ng: 7, H√¨nh tr√≤n: 3"
            ],
            answer: 0 
        },
        {
            id: 11, type: "multiple",
            imageText: "<img src='image/cau11.jpg' alt='·∫¢nh c√°c lo√†i hoa' style='max-width: 100%; height: auto;'>",
            text: "√î ch·ªØ tr√™n c√≥ .... t·ª´ ch·ªâ lo√†i hoa.",
            options: ["A. 1", "B. 2", "C. 3", "D. 4"],
            answer: 2 
        },
        {
            id: 12, type: "multiple",
            text: "C√¢u n√†o d∆∞·ªõi ƒë√¢y n√≥i v·ªÅ ƒë·ªì v·∫≠t?",
            options: [
                "A. B·ªë ƒëi l√†m ·ªü xa nh√†.",
                "B. Qu·∫£ na ·ªü ch·ª£ r·∫•t to v√† ng·ªçt.",
                "C. KhƒÉn len c·ªßa b√© m·ªÅm v√† ·∫•m.",
                "D. H√† m√£ l√† con v·∫≠t to l·ªõn."
            ],
            answer: 2
        },
        {
            id: 13, type: "multiple",
            imageText: "<img src='image/cau14.jpg' alt='·∫¢nh 4 b·∫°n h·ªçc sinh' style='max-width: 100%; height: auto;'>",
            text: "S·∫Øp x·∫øp t√™n c√°c b·∫°n sau theo ƒë√∫ng th·ª© t·ª± ch·ªØ c√°i trong b·∫£ng ch·ªØ c√°i.",
            options: [
                "A. Kh√°nh; D≈©ng; Mai; Chi",
                "B. Mai; Chi; Kh√°nh; D≈©ng",
                "C. Chi; D≈©ng; Mai; Kh√°nh"
            ],
            answer: 2
        },
        {
            id: 14, type: "multiple",
            text: "S·∫Øp x·∫øp c√°c ti·∫øng sau ƒë·ªÉ t·∫°o th√†nh c√¢u ho√†n ch·ªânh.<br>lƒÉng/ ch√πm / n·ªü/ bi·∫øc./ t√≠m / b·∫±ng / Nh·ªØng",
            options: [
                "A. Nh·ªØng ch√πm b·∫±ng lƒÉng t√≠m bi·∫øc n·ªü.", 
                "B. Nh·ªØng ch√πm b·∫±ng lƒÉng n·ªü t√≠m bi·∫øc.", 
                "C. Nh·ªØng b·∫±ng lƒÉng n·ªü ch√πm t√≠m bi·∫øc."
            ],
            answer: 1
        },
        {
            id: 15, type: "multiple",
            imageText: "<img src='image/cau16.jpg' alt='·∫¢nh ng∆∞·ªùi m·∫π ƒëang qu·∫°t' style='max-width: 100%; height: auto;'>",
            text: "H√¨nh ·∫£nh sau c√≥ th·ªÉ minh ho·∫° cho ƒëo·∫°n th∆° n√†o d∆∞·ªõi ƒë√¢y?",
            options: [
                "A. Nh·ªØng c√°nh ƒë·ªìng b√¨nh y√™n<br>N·∫±m ph∆°i m√¨nh ·ªü gi·ªØa<br>Nh·ªØng con s√¥ng xanh, h·ªìng<br>U·ªën quanh trƒÉm d·∫£i l·ª•a.",
                "B. Ch√∫ng em theo m·∫π<br>N√≥n l√° ra ƒë·ªìng<br>Ng√†n con su·ªëi nh·ªè<br>C√πng ch·∫£y v·ªÅ s√¥ng.",
                "C. L·ªùi ru c√≥ gi√≥ m√πa thu<br>B√†n tay m·∫π qu·∫°t m·∫π ƒë∆∞a gi√≥ v·ªÅ<br>Nh·ªØng ng√¥i sao th·ª©c ngo√†i kia<br>Ch·∫≥ng b·∫±ng m·∫π ƒë√£ th·ª©c v√¨ ch√∫ng con."
            ],
            answer: 2
        },
        {
            id: 16, type: "multiple",
            imageText: "<img src='image/cau18.jpg' alt='·∫¢nh b√© g√°i ƒÉn d∆∞a h·∫•u' style='max-width: 100%; height: auto;'>",
            text: "H√¨nh ·∫£nh sau th√≠ch h·ª£p m√¥ t·∫£ c√¢u t·ª•c ng·ªØ n√†o?",
            options: [
                "A. U·ªëng n∆∞·ªõc nh·ªõ ngu·ªìn.",
                "B. ƒÇn qu·∫£ nh·ªõ k·∫ª tr·ªìng c√¢y.",
                "C. ƒÇn tr√¥ng n·ªìi ng·ªìi tr√¥ng h∆∞·ªõng.",
                "D. H·ªçc ƒÉn, h·ªçc n√≥i, h·ªçc g√≥i, h·ªçc m·ªü."
            ],
            answer: 1
        },
        {
            id: 17, type: "multiple",
            imageText: "<img src='image/cau25.jpg' alt='Gh√©p v·∫ßn' style='max-width: 100%; height: auto;'>",
            text: "H√£y gh√©p h√¨nh ·∫£nh v·ªõi v·∫ßn t∆∞∆°ng ·ª©ng:",
            options: ["A. 1b 2c 3a", "B. 1c 2b 3a", "C. 1a 2c 3b"],
            answer: 2
        },
        {
            id: 18, type: "arrange",
            text: "S·∫Øp x·∫øp c√°c ch·ªØ sau ƒë·ªÉ t·∫°o th√†nh t·ª´ ch·ªâ ngh·ªÅ nghi·ªáp. (Nh·∫•n v√†o c√°c ch·ªØ c√°i b√™n d∆∞·ªõi ƒë·ªÉ gh√©p)",
            letters: ['i', 'P', 'h', 'c', 'g', '√¥', 'n'],
            correctAnswer: "Phic√¥ng",
            displayAnswer: "Phi c√¥ng"
        }
    ];

    const quizContainer = document.getElementById('quiz-container');

    function moveLetter(element, targetId, originId) {
        const parentId = element.parentElement.id;
        if (parentId === originId) {
            document.getElementById(targetId).appendChild(element);
        } else {
            document.getElementById(originId).appendChild(element);
        }
    }

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    function loadQuiz() {
        quizContainer.innerHTML = '';
        
        quizData.forEach((q, index) => {
            const questionElement = document.createElement('div');
            questionElement.className = 'question-card';
            
            let htmlContent = `<div class="question-title">C√¢u ${index + 1}: ${q.text}</div>`;
            
            if (q.imageText) {
                htmlContent += `<div class="image-placeholder">${q.imageText}</div>`; 
            }

            if (q.type === "multiple") {
                htmlContent += `<ul class="options-list">`;
                q.options.forEach((opt, optIndex) => {
                    htmlContent += `
                        <li class="option-item">
                            <label class="option-label" id="label-q${index}-o${optIndex}">
                                <input type="radio" name="question${index}" value="${optIndex}">
                                <span>${opt}</span>
                            </label>
                        </li>
                    `;
                });
                htmlContent += `</ul>`;
            } else if (q.type === "arrange") {
                htmlContent += `
                    <div class="arrange-container" id="arrange-container-${index}">
                        <span class="arrange-label">üëá T√∫i h·∫°t gi·ªëng ch·ªØ c√°i:</span>
                        <div class="letters-pool" id="pool-q${index}">
                `;
                let shuffledLetters = [...q.letters];
                shuffleArray(shuffledLetters);
                
                shuffledLetters.forEach((letter) => {
                    htmlContent += `<span class="letter-tile" onclick="moveLetter(this, 'answer-q${index}', 'pool-q${index}')">${letter}</span>`;
                });
                htmlContent += `
                        </div>
                        <span class="arrange-label">üå± M·∫£nh ƒë·∫•t gieo tr·ªìng:</span>
                        <div class="answer-box" id="answer-q${index}"></div>
                        <div class="correct-text-msg" id="msg-q${index}">${q.displayAnswer}</div>
                    </div>
                `;
            }

            questionElement.innerHTML = htmlContent;
            quizContainer.appendChild(questionElement);
        });

        document.getElementById('result-box').style.display = 'none';
        document.getElementById('resetBtn').style.display = 'none';
        document.getElementById('submitBtn').style.display = 'block';
    }

    function submitQuiz() {
        const studentNameInput = document.getElementById('studentName');
        const studentClassInput = document.getElementById('studentClass');
        const studentName = studentNameInput.value.trim();
        const studentClass = studentClassInput.value.trim();

        if (studentName === "" || studentClass === "") {
            alert("Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß H·ªç v√† t√™n v√† L·ªõp tr∆∞·ªõc khi n·ªôp b√†i.");
            if(studentName === "") studentNameInput.focus();
            else studentClassInput.focus();
            document.querySelector('.student-info-card').scrollIntoView({ behavior: 'smooth', block: 'center' });
            return; 
        }

        const btn = document.getElementById('submitBtn');
        btn.innerText = "‚è≥ ƒêang ch·∫•m b√†i v√† g·ª≠i ƒëi·ªÉm...";
        btn.classList.add('loading');

        let score = 0;
        
        quizData.forEach((q, index) => {
            if (q.type === "multiple") {
                const selectedOption = document.querySelector(`input[name="question${index}"]:checked`);
                
                q.options.forEach((_, optIndex) => {
                    document.getElementById(`label-q${index}-o${optIndex}`).classList.remove('correct-answer', 'wrong-answer');
                });

                if (selectedOption) {
                    const selectedValue = parseInt(selectedOption.value);
                    document.getElementById(`label-q${index}-o${q.answer}`).classList.add('correct-answer');
                    if (selectedValue === q.answer) {
                        score++;
                    } else {
                        document.getElementById(`label-q${index}-o${selectedValue}`).classList.add('wrong-answer');
                    }
                } else {
                    document.getElementById(`label-q${index}-o${q.answer}`).classList.add('correct-answer');
                }
            } else if (q.type === "arrange") {
                const answerBox = document.getElementById(`answer-q${index}`);
                const userWord = Array.from(answerBox.children).map(span => span.innerText).join('');
                
                if (userWord.toLowerCase() === q.correctAnswer.toLowerCase()) {
                    score++;
                    answerBox.style.backgroundColor = '#C8E6C9';
                    answerBox.style.borderColor = '#2E7D32';
                } else {
                    answerBox.style.backgroundColor = '#FFCDD2';
                    answerBox.style.borderColor = '#C62828';
                    document.getElementById(`msg-q${index}`).style.display = 'block';
                }
            }
        });

        const storageKey = `quiz_attempts_${studentName.replace(/\s+/g, '')}_${studentClass.replace(/\s+/g, '')}`;
        let attempts = parseInt(localStorage.getItem(storageKey)) || 0;
        attempts += 1;
        localStorage.setItem(storageKey, attempts);

        let formData = new FormData();
        formData.append("name", studentName);
        formData.append("studentClass", studentClass);
        formData.append("score", score + "/" + quizData.length);
        formData.append("attempts", attempts);

        fetch(scriptURL, { method: 'POST', body: formData, mode: 'no-cors' })
            .then(response => {
                console.log('ƒê√£ g·ª≠i ƒëi·ªÉm th√†nh c√¥ng!');
                hienThiKetQua(studentName, studentClass, score, attempts, btn);
            })
            .catch(error => {
                console.error('L·ªói m·∫°ng, nh∆∞ng v·∫´n hi·ªán ƒëi·ªÉm:', error.message);
                hienThiKetQua(studentName, studentClass, score, attempts, btn); 
            });
    }

    function hienThiKetQua(studentName, studentClass, score, attempts, btn) {
        const resultBox = document.getElementById('result-box');
        resultBox.style.display = 'block';
        
        let feedbackIcon = score === quizData.length ? 'üå∑ Xu·∫•t s·∫Øc!' : 'üåª Ho√†n th√†nh!';
        
        resultBox.innerHTML = `
            <h2>${feedbackIcon}</h2>
            <div class="result-stat"><span class="stat-icon">üë§</span> <span><strong>H·ªç v√† t√™n:</strong> ${studentName}</span></div>
            <div class="result-stat"><span class="stat-icon">üè´</span> <span><strong>L·ªõp:</strong> ${studentClass}</span></div>
            <div class="result-stat"><span class="stat-icon">üéØ</span> <span><strong>K·∫øt qu·∫£:</strong> <span class="score-highlight">${score} / ${quizData.length} c√¢u</span></span></div>
            <div class="result-stat"><span class="stat-icon">üîÑ</span> <span><strong>S·ªë l·∫ßn n·ªôp:</strong> ${attempts} l·∫ßn</span></div>
            <p style="text-align: center; margin-top: 25px; font-size: 1.1em; color: var(--text-brown); font-family: var(--font-heading);">
                (C√°c c√¢u l√†m sai ƒë√£ ƒë∆∞·ª£c ƒë√°nh d·∫•u m√†u ƒë·ªè v√† hi·ªán ƒë√°p √°n ƒë√∫ng m√†u xanh r·ªìi ƒë√≥!)
            </p>
        `;
        
        btn.innerText = "üåª N·ªôp B√†i & Thu Ho·∫°ch üåª";
        btn.classList.remove('loading');
        document.getElementById('submitBtn').style.display = 'none';
        document.getElementById('resetBtn').style.display = 'block';

        resultBox.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    function resetQuiz() {
        shuffleArray(quizData);
        loadQuiz();
        document.querySelector('.student-info-card').scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    window.onload = loadQuiz;
</script>

</body>
</html>