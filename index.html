<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Khu V∆∞·ªùn Tri Th·ª©c L·ªõp 1</title>
    <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&family=Nunito:wght@600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            /* B·∫£ng m√†u V∆∞·ªùn Hoa */
            --sky-blue: #87CEEB;
            --grass-green: #7CB342;
            --soil-brown: #8D6E63;
            --flower-pink: #FF69B4;
            --flower-yellow: #FFD700;
            --flower-orange: #FF9800;
            --leaf-light: #C5E1A5;
            --leaf-dark: #558B2F;
            --wood-texture: #D7CCC8;
            
            --font-main: 'Nunito', sans-serif;
            --font-hand: 'Patrick Hand', cursive; /* Font ch·ªØ vi·∫øt tay vui nh·ªôn */

            --shadow-soft: 0 8px 20px rgba(0,0,0,0.15);
            --border-radius-organic: 25px 15px 30px 20px; /* Bo g√≥c ki·ªÉu t·ª± nhi√™n */
        }

        body {
            font-family: var(--font-main);
            /* N·ªÅn tr·ªùi xanh chuy·ªÉn sang c·ªè xanh */
            background: linear-gradient(to bottom, var(--sky-blue) 0%, #B2EBF2 60%, var(--grass-green) 100%);
            color: #3E2723;
            line-height: 1.6;
            padding: 30px 15px;
            margin: 0;
            min-height: 100vh;
            background-attachment: fixed;
        }

        /* Hi·ªáu ·ª©ng trang tr√≠ n·ªÅn (m√¢y v√† hoa) */
        body::before {
            content: '‚òÅÔ∏è üå∏ üêù ‚òÅÔ∏è ü¶ã üåº';
            position: fixed;
            top: 20px;
            left: 0;
            width: 100%;
            text-align: center;
            font-size: 2em;
            opacity: 0.6;
            z-index: -1;
            letter-spacing: 3em;
        }

        .container {
            max-width: 850px;
            margin: 0 auto;
            /* N·ªÅn g·ªó s√°ng m√†u */
            background-color: #FFF8E7;
            padding: 40px;
            border-radius: 30px;
            border: 4px solid #A1887F;
            box-shadow: var(--shadow-soft), inset 0 0 20px rgba(141, 110, 99, 0.1);
            position: relative;
        }

        /* D√¢y leo trang tr√≠ g√≥c */
        .container::after {
            content: 'üåøüå∫üåø';
            position: absolute;
            top: -25px;
            right: -20px;
            font-size: 3em;
            transform: rotate(15deg);
        }
        .container::before {
            content: 'üåøüçÑüåø';
            position: absolute;
            bottom: -25px;
            left: -20px;
            font-size: 3em;
            transform: rotate(-15deg);
        }

        h1 {
            text-align: center;
            font-family: var(--font-hand);
            color: var(--leaf-dark);
            font-weight: 800;
            font-size: 3em;
            margin-bottom: 30px;
            text-shadow: 2px 2px 0px var(--flower-yellow);
        }

        h1 span {
            display: inline-block;
            position: relative;
        }
        h1 span::before, h1 span::after {
            content: 'üåª';
            font-size: 0.8em;
            margin: 0 10px;
            vertical-align: middle;
        }

        /* Khung th√¥ng tin h·ªçc sinh - B·∫£ng g·ªó */
        .student-info-card {
            background-color: #EFEBE9; /* M√†u g·ªó nh·∫°t */
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 40px;
            border: 3px dashed var(--soil-brown);
            box-shadow: 5px 5px 0px rgba(141, 110, 99, 0.2);
        }

        .student-info-card h3 {
            margin-top: 0;
            font-family: var(--font-hand);
            color: var(--soil-brown);
            font-size: 1.8em;
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            font-weight: 800;
            margin-bottom: 8px;
            color: var(--leaf-dark);
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--leaf-light);
            border-radius: 15px;
            font-size: 1.1em;
            font-family: var(--font-hand);
            box-sizing: border-box;
            outline: none;
            background: #FFFFFF;
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            border-color: var(--grass-green);
            box-shadow: 0 0 0 4px rgba(124, 179, 66, 0.2);
        }

        /* Th·∫ª c√¢u h·ªèi - Lu·ªëng hoa */
        .question-card {
            background: #FFFFFF;
            margin-bottom: 35px;
            padding: 30px;
            border-radius: var(--border-radius-organic);
            border: 3px solid var(--leaf-light);
            position: relative;
            overflow: hidden;
        }
        
        /* H·ªça ti·∫øt l√° ch√¨m trong th·∫ª c√¢u h·ªèi */
        .question-card::before {
            content: 'üçÉ';
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 2em;
            opacity: 0.1;
            transform: rotate(45deg);
        }

        .question-title {
            font-weight: 800;
            font-size: 1.3em;
            margin-bottom: 20px;
            color: var(--leaf-dark);
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }
        .question-title::before {
            content: 'üå±'; /* Bi·ªÉu t∆∞·ª£ng m·∫ßm c√¢y ƒë·∫ßu c√¢u */
        }

        .poem-text {
            font-family: var(--font-hand);
            font-size: 1.2em;
            font-style: italic;
            background-color: #F1F8E9; /* N·ªÅn xanh l√° m·∫° nh·∫°t */
            padding: 20px;
            border-radius: 15px;
            border: 2px dashed var(--grass-green);
            margin: 15px 0;
            color: #33691E;
            position: relative;
        }
        .poem-text::after {
             content: 'üìú';
             position: absolute;
             bottom: 10px;
             right: 10px;
             opacity: 0.3;
        }

        .image-placeholder {
            width: 100%;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 20px;
            text-align: center;
            border: 4px solid #FFF;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        
        .image-placeholder img {
            max-width: 100%;
            height: auto;
            display: block;
        }

        /* Danh s√°ch ƒë√°p √°n - H√¨nh chi·∫øc l√° */
        .options-list {
            list-style-type: none;
            padding: 0;
            display: grid;
            gap: 15px;
        }

        .option-label {
            display: flex;
            align-items: center;
            padding: 15px 25px;
            background-color: #F1F8E9;
            border: 2px solid var(--leaf-light);
            /* Bo g√≥c ki·ªÉu chi·∫øc l√° */
            border-radius: 20px 50px 20px 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 700;
            position: relative;
            overflow: hidden;
        }

        .option-label:hover {
            background-color: var(--leaf-light);
            transform: scale(1.02) rotate(-1deg);
        }
        
        /* Hi·ªáu ·ª©ng khi ch·ªçn ƒë√°p √°n - N·ªü hoa */
        input[type="radio"]:checked + span::before {
             content: 'üå∏ ';
        }

        input[type="radio"] {
            margin-right: 15px;
            transform: scale(1.5);
            accent-color: var(--flower-pink);
            cursor: pointer;
        }

        /* C√¢u h·ªèi s·∫Øp x·∫øp ch·ªØ - Tr·ªìng c√¢y */
        .arrange-container {
            margin-top: 15px;
            background: #FFF3E0; /* N·ªÅn m√†u ƒë·∫•t nh·∫°t */
            padding: 25px;
            border-radius: 20px;
            border: 3px dotted var(--flower-orange);
        }
        
        .arrange-label {
            font-weight: 800;
            color: #E65100;
            margin-bottom: 10px;
            display: block;
        }

        .letters-pool, .answer-box {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            padding: 20px;
            min-height: 70px;
            border-radius: 15px;
            margin-bottom: 20px;
            align-items: center;
        }

        .letters-pool {
            /* T√∫i h·∫°t gi·ªëng */
            background-color: #FFECB3;
            border: 2px dashed var(--flower-orange);
            position: relative;
        }
        .letters-pool::after { content: 'T√∫i h·∫°t gi·ªëng üå∞'; position: absolute; top: -10px; right: 10px; font-size: 0.8em; background: #FFF; padding: 2px 5px; border-radius: 5px;}


        .answer-box {
            /* M·∫£nh ƒë·∫•t */
            background-color: #D7CCC8;
            border: 3px solid var(--soil-brown);
            box-shadow: inset 0 0 10px rgba(0,0,0,0.1);
            position: relative;
        }
        .answer-box::after { content: 'M·∫£nh ƒë·∫•t gieo tr·ªìng üå±'; position: absolute; top: -10px; right: 10px; font-size: 0.8em; background: #FFF; padding: 2px 5px; border-radius: 5px;}


        .letter-tile {
            display: inline-flex;
            justify-content: center;
            align-items: center;
            width: 55px;
            height: 55px;
            /* H√¨nh h·∫°t gi·ªëng/m·∫ßm c√¢y */
            background: linear-gradient(135deg, var(--leaf-light), #AED581);
            color: var(--leaf-dark);
            font-size: 1.8em;
            font-family: var(--font-hand);
            font-weight: 800;
            border: 3px solid var(--grass-green);
            border-radius: 50%; /* H√¨nh tr√≤n */
            cursor: pointer;
            box-shadow: 0 5px 0px #689F38;
            user-select: none;
            transition: all 0.2s;
        }

        .letter-tile:hover {
            transform: translateY(-3px);
        }

        .letter-tile:active {
            transform: translateY(2px);
            box-shadow: 0 2px 0px #689F38;
        }

        .correct-text-msg {
            color: var(--grass-green);
            font-weight: 800;
            margin-top: 15px;
            display: none;
            text-align: center;
            font-size: 1.2em;
        }
        .correct-text-msg::before { content: 'üéâ ƒê√∫ng r·ªìi! C√¢y ƒë√£ n·ªü hoa: üå∑ '; }

        /* Highlight ƒê√∫ng/Sai */
        .correct-answer {
            background-color: #C8E6C9 !important; /* M√†u xanh l√° m·∫° ƒë·∫≠m h∆°n */
            border-color: #2E7D32 !important;
            color: #1B5E20 !important;
        }
        .correct-answer span::before { content: '‚úÖ '; }

        .wrong-answer {
            background-color: #FFCDD2 !important; /* M√†u h·ªìng ƒë·ªè nh·∫°t */
            border-color: #C62828 !important;
            color: #B71C1C !important;
            opacity: 0.8;
        }
        .wrong-answer span::before { content: '‚ùå '; }


        /* N√∫t ch·ª©c nƒÉng - B√¥ng hoa l·ªõn */
        .btn {
            display: block;
            width: 100%;
            padding: 18px;
            font-size: 1.4em;
            font-family: var(--font-hand);
            font-weight: 800;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 40px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 1px;
            position: relative;
            overflow: hidden;
        }

        .submit-btn {
            /* M√†u hoa h∆∞·ªõng d∆∞∆°ng/cam */
            background: linear-gradient(to bottom, var(--flower-yellow), var(--flower-orange));
            box-shadow: 0 6px 0px #E65100;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.2);
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 9px 0px #E65100;
        }
        .submit-btn:active { transform: translateY(3px); box-shadow: 0 3px 0px #E65100; }


        .reset-btn {
            /* M√†u xanh t∆∞·ªõi n∆∞·ªõc */
            background: linear-gradient(to bottom, #4FC3F7, #0288D1);
            box-shadow: 0 6px 0px #01579B;
            display: none; 
            text-shadow: 2px 2px 0px rgba(0,0,0,0.2);
        }

        .reset-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 9px 0px #01579B;
        }
        
        .loading {
            opacity: 0.8;
            pointer-events: none;
            background: #CFD8DC !important; /* M√†u x√°m khi ƒëang t·∫£i */
            box-shadow: none !important;
            color: #455A64 !important;
        }

        /* Khung k·∫øt qu·∫£ - B·∫£ng vinh danh */
        #result-box {
            display: none;
            margin-top: 50px;
            padding: 35px;
            /* N·ªÅn gi·∫•y cu·ªôn */
            background-color: #FFFDE7;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23FFD700' fill-opacity='0.2' fill-rule='evenodd'/%3E%3C/svg%3E");
            border: 5px solid var(--flower-yellow);
            border-radius: 30px;
            color: #5D4037;
            box-shadow: var(--shadow-soft);
            position: relative;
        }
        
        #result-box::before { content: 'üèÜ'; position: absolute; top: -25px; left: 50%; transform: translateX(-50%); font-size: 3em; }

        #result-box h2 {
            margin-top: 15px;
            text-align: center;
            font-family: var(--font-hand);
            color: #F57F17;
            font-size: 2.5em;
            font-weight: 900;
        }

        .result-stat {
            font-size: 1.3em;
            margin: 15px 0;
            padding: 15px 25px;
            background: #FFFFFF;
            border-radius: 20px;
            border-bottom: 4px solid var(--grass-green);
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .stat-icon { font-size: 1.5em; }

        @media (max-width: 600px) {
            .container { padding: 25px 15px; border-width: 3px; }
            h1 { font-size: 2.2em; }
            .btn { font-size: 1.2em; padding: 15px; }
            .letter-tile { width: 45px; height: 45px; font-size: 1.4em; border-width: 2px; box-shadow: 0 3px 0px #689F38; }
            .student-info-card h3 { font-size: 1.5em; }
        }
    </style>
</head>
<body>

<div class="container">
    <h1><span>Khu V∆∞·ªùn Tri Th·ª©c L·ªõp 1</span></h1>

    <div class="student-info-card">
        <h3>üè° Th√¥ng tin c·ªßa B√°c l√†m v∆∞·ªùn nh√≠</h3>
        <div class="input-group">
            <label for="studentName">H·ªç v√† t√™n c·ªßa em:</label>
            <input type="text" id="studentName" placeholder="V√≠ d·ª•: Nguy·ªÖn VƒÉn A" required>
        </div>
        <div class="input-group">
            <label for="studentClass">L·ªõp:</label>
            <input type="text" id="studentClass" placeholder="V√≠ d·ª•: 1A1" required>
        </div>
    </div>

    <div id="quiz-container"></div>
    
    <button id="submitBtn" class="btn submit-btn" onclick="submitQuiz()">üåª N·ªôp B√†i & Thu Ho·∫°ch üåª</button>
    <button id="resetBtn" class="btn reset-btn" onclick="resetQuiz()">üí¶ L√†m L·∫°i B√†i (T∆∞·ªõi N∆∞·ªõc)</button>
    
    <div id="result-box"></div>
</div>

<script>
    // ‚ö†Ô∏è QUAN TR·ªåNG: D√°n ƒë∆∞·ªùng link Web App URL c·ªßa Google Sheets v√†o d√≤ng d∆∞·ªõi ƒë√¢y:
    const scriptURL = 'D√ÅN_LINK_APP_SCRIPT_V√ÄO_ƒê√ÇY'; 

    const quizData = [
        {
            id: 1, type: "multiple",
            text: "Nh·ªØng chi·∫øn sƒ© b·∫£o v·ªá t·ªï qu·ªëc c√≤n ƒë∆∞·ª£c g·ªçi l√† g√¨?",
            options: ["A. gi√°o vi√™n", "B. kƒ© s∆∞", "C. b·ªô ƒë·ªôi", "D. c·∫ßu th·ªß"],
            answer: 2
        },
        {
            id: 2, type: "multiple",
            text: "ƒê√°p √°n n√†o d∆∞·ªõi ƒë√¢y ch·ªâ g·ªìm c√°c t·ª´ ng·ªØ ch·ªâ trang ph·ª•c?",
            options: [
                "A. ƒë√¥i d√©p, th·∫Øt l∆∞ng, b√≥ hoa", 
                "B. qu·∫ßn v·∫£i, ƒë√¥i gi√†y, trang tr√≠", 
                "C. √°o kho√°c, m≈© len, khƒÉn qu√†ng", 
                "D. ƒë√¥i t·∫•t, gƒÉng tay, ph·ª•c v·ª•"
            ],
            answer: 2
        },
        {
            id: 3, type: "multiple",
            text: "Kh·ªï th∆° d∆∞·ªõi ƒë√¢y nh·∫Øc ƒë·∫øn d·∫•u thanh n√†o?<br><div class='poem-text'>D·∫•u n√†o c≈©ng n·ªïi tr√™n<br>Ri√™ng em th√¨ ch√¨m d∆∞·ªõi<br>M·ªçi ng∆∞·ªùi ƒë·ª´ng ch√™ em<br>Tuy nh·ªè nh∆∞ng n·∫∑ng k√≠.</div>(Nguy·ªÖn L√£m Th·∫Øng)",
            options: ["A. d·∫•u huy·ªÅn", "B. d·∫•u ng√£", "C. d·∫•u n·∫∑ng", "D. d·∫•u h·ªèi"],
            answer: 2
        },
        {
            id: 4, type: "multiple",
            text: "\"T√™ gi√°c\" c√≥ th·ªÉ gh√©p v·ªõi ƒë√°p √°n n√†o ƒë·ªÉ t·∫°o th√†nh c√¢u ƒë√∫ng?",
            options: [
                "A. nh·∫∑t th√≥c tr√™n s√¢n", 
                "B. s·ªëng trong khu r·ª´ng", 
                "C. ·∫•p tr·ª©ng trong t·ªï", 
                "D. m√≤ c√° tr√™n ƒë·ªìng"
            ],
            answer: 1
        },
        {
            id: 5, type: "multiple",
            imageText: "<img src='image/cau5.jpg' alt='H√¨nh ·∫£nh ƒë√†n ong' style='max-width: 100%; height: auto;'>",
            text: "C√¢u n√†o m√¥ t·∫£ ƒë√∫ng h√¨nh ·∫£nh sau?",
            options: [
                "A. Nh·ªØng ch√∫ ong chƒÉm ch·ªâ t√¨m m·∫≠t trong v∆∞·ªùn.", 
                "B. Nh·ªØng ch√∫ b∆∞·ªõm ƒëang h√∫t m·∫≠t trong v∆∞·ªùn.", 
                "C. Nh·ªØng ch√∫ chim ƒëang ki·∫øm ƒÉn trong v∆∞·ªùn.", 
                "D. Nh·ªØng ch√∫ ong v√†ng ƒëang l√†m t·ªï trong v∆∞·ªùn."
            ],
            answer: 0
        },
        {
            id: 6, type: "multiple",
            text: "Ch·ªçn v·∫ßn th√≠ch h·ª£p ƒëi·ªÅn v√†o ch·ªó tr·ªëng.<br>C√°c t·ª´ ng·ªØ \"bi·∫øt ∆°n\", \"ti·∫øt h·ªçc\", \"th√¢n thi·∫øt\", \"vi·∫øt ch·ªØ\" c√≥ chung v·∫ßn .....",
            options: ["A. i√™n", "B. i√™t", "C. i√™c"],
            answer: 1
        },
        {
            id: 7, type: "multiple",
            text: "L·ªõp 1B c√≥ m·ªôt b·∫°n h·ªçc sinh m·ªõi chuy·ªÉn ƒë·∫øn. B·∫°n ·∫•y c√≥ v·∫ª nh√∫t nh√°t v√† ch∆∞a quen ai. C√¥ gi√°o nh·ªù l·ªõp tr∆∞·ªüng ra l√†m quen v·ªõi b·∫°n. B·∫°n l·ªõp tr∆∞·ªüng n√™n n√≥i g√¨?",
            options: [
                "A. Ch√†o c·∫≠u, t·ªõ l√† l·ªõp tr∆∞·ªüng. R·∫•t vui ƒë∆∞·ª£c l√†m quen v·ªõi c·∫≠u. C·∫≠u c√≥ c·∫ßn t·ªõ gi√∫p g√¨ kh√¥ng?", 
                "B. T·∫°i sao c·∫≠u l·∫°i chuy·ªÉn ƒë·∫øn tr∆∞·ªùng n√†y v·∫≠y?", 
                "C. Nh√¨n c·∫≠u c√≥ v·∫ª √≠t n√≥i nh·ªâ.", 
                "D. C·∫≠u c√≥ bi·∫øt l√†m b√†i t·∫≠p to√°n h√¥m qua kh√¥ng?"
            ],
            answer: 0
        },
        {
            id: 8, type: "multiple",
            imageText: "<img src='image/cau8.jpg' alt='H√¨nh ·∫£nh c√°c con v·∫≠t' style='max-width: 100%; height: auto;'>",
            text: "Trong h√¨nh ·∫£nh tr√™n c√≥ ...... con v·∫≠t c√≥ t√™n ch·ª©a v·∫ßn \"√¢u\"?",
            options: ["A. 1", "B. 2", "C. 3", "D. 4"],
            answer: 1
        },
        {
            id: 9, type: "multiple",
            text: "Ch·ªçn ch·ªØ th√≠ch h·ª£p l·∫ßn l∆∞·ª£t ƒëi·ªÅn v√†o ch·ªó tr·ªëng sau:<br>Th·ªùi ti·∫øt m√πa ƒë√¥ng [...]·∫•t l·∫°nh [...]√°.",
            options: ["A. r- r", "B. gi- d", "C. r- gi", "D. gi - gi"],
            answer: 2 
        },
        {
            id: 10, type: "multiple",
            // H√¨nh ·∫£nh ƒë∆∞·ª£c v·∫Ω tr·ª±c ti·∫øp b·∫±ng code SVG (Kh√¥ng c·∫ßn file ·∫£nh r·ªùi)
            imageText: `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 350 280" width="100%" style="background-color: #204e30; border-radius: 15px; border: 4px solid #8D6E63; max-width: 400px; margin: 0 auto; display: block; box-shadow: 0 4px 10px rgba(0,0,0,0.15);">
                <style>
                    .op { font-family: 'Nunito', sans-serif; font-size: 32px; fill: white; font-weight: bold; text-anchor: middle; dominant-baseline: middle; }
                    .res { font-family: 'Nunito', sans-serif; font-size: 32px; fill: white; font-weight: bold; dominant-baseline: middle; }
                    .shape { stroke-width: 5; fill: rgba(255,255,255,0.05); }
                    .circle { stroke: #ff8a80; }
                    .square { stroke: #82b1ff; }
                    .triangle { stroke: #b9f6ca; }
                </style>
                <circle cx="80" cy="50" r="22" class="shape circle"/>
                <text x="140" y="55" class="op">+</text>
                <circle cx="200" cy="50" r="22" class="shape circle"/>
                <text x="250" y="55" class="op">=</text>
                <text x="280" y="55" class="res">14</text>
                
                <circle cx="80" cy="115" r="22" class="shape circle"/>
                <text x="140" y="120" class="op">+</text>
                <rect x="178" y="93" width="44" height="44" rx="6" class="shape square"/>
                <text x="250" y="120" class="op">=</text>
                <text x="280" y="120" class="res">10</text>
                
                <rect x="58" y="158" width="44" height="44" rx="6" class="shape square"/>
                <text x="140" y="185" class="op">+</text>
                <polygon points="200,155 174,203 226,203" stroke-linejoin="round" class="shape triangle"/>
                <text x="250" y="185" class="op">=</text>
                <text x="280" y="185" class="res">8</text>
                
                <polygon points="80,220 54,268 106,268" stroke-linejoin="round" class="shape triangle"/>
                <text x="140" y="250" class="op">+</text>
                <circle cx="200" cy="245" r="22" class="shape circle"/>
                <text x="250" y="250" class="op">=</text>
                <text x="280" y="250" class="res">12</text>
            </svg>`,
            text: "D·ª±a v√†o c√°c ph√©p t√≠nh tr√™n, h√¨nh tam gi√°c, h√¨nh vu√¥ng v√† h√¨nh tr√≤n c√≥ gi√° tr·ªã l√† bao nhi√™u?",
            options: [
                "A. Tam gi√°c: 5, H√¨nh vu√¥ng: 3, H√¨nh tr√≤n: 7", 
                "B. Tam gi√°c: 3, H√¨nh vu√¥ng: 5, H√¨nh tr√≤n: 7", 
                "C. Tam gi√°c: 7, H√¨nh vu√¥ng: 3, H√¨nh tr√≤n: 5", 
                "D. Tam gi√°c: 5, H√¨nh vu√¥ng: 7, H√¨nh tr√≤n: 3"
            ],
            answer: 0 // ƒê√°p √°n A l√† ƒë√∫ng
        },
        {
            id: 11, type: "multiple",
            imageText: "<img src='image/cau11.jpg' alt='·∫¢nh c√°c lo√†i hoa' style='max-width: 100%; height: auto;'>",
            text: "√î ch·ªØ tr√™n c√≥ .... t·ª´ ch·ªâ lo√†i hoa.",
            options: ["A. 1", "B. 2", "C. 3", "D. 4"],
            answer: 2 
        },
        {
            id: 12, type: "multiple",
            text: "C√¢u n√†o d∆∞·ªõi ƒë√¢y n√≥i v·ªÅ ƒë·ªì v·∫≠t?",
            options: [
                "A. B·ªë ƒëi l√†m ·ªü xa nh√†.",
                "B. Qu·∫£ na ·ªü ch·ª£ r·∫•t to v√† ng·ªçt.",
                "C. KhƒÉn len c·ªßa b√© m·ªÅm v√† ·∫•m.",
                "D. H√† m√£ l√† con v·∫≠t to l·ªõn."
            ],
            answer: 2
        },
        {
            id: 13, type: "multiple",
            imageText: "<img src='image/cau14.jpg' alt='·∫¢nh 4 b·∫°n h·ªçc sinh' style='max-width: 100%; height: auto;'>",
            text: "S·∫Øp x·∫øp t√™n c√°c b·∫°n sau theo ƒë√∫ng th·ª© t·ª± ch·ªØ c√°i trong b·∫£ng ch·ªØ c√°i.",
            options: [
                "A. Kh√°nh; D≈©ng; Mai; Chi",
                "B. Mai; Chi; Kh√°nh; D≈©ng",
                "C. Chi; D≈©ng; Mai; Kh√°nh"
            ],
            answer: 2
        },
        {
            id: 14, type: "multiple",
            text: "S·∫Øp x·∫øp c√°c ti·∫øng sau ƒë·ªÉ t·∫°o th√†nh c√¢u ho√†n ch·ªânh.<br>lƒÉng/ ch√πm / n·ªü/ bi·∫øc./ t√≠m / b·∫±ng / Nh·ªØng",
            options: [
                "A. Nh·ªØng ch√πm b·∫±ng lƒÉng t√≠m bi·∫øc n·ªü.", 
                "B. Nh·ªØng ch√πm b·∫±ng lƒÉng n·ªü t√≠m bi·∫øc.", 
                "C. Nh·ªØng b·∫±ng lƒÉng n·ªü ch√πm t√≠m bi·∫øc."
            ],
            answer: 1
        },
        {
            id: 15, type: "multiple",
            imageText: "<img src='image/cau16.jpg' alt='·∫¢nh ng∆∞·ªùi m·∫π ƒëang qu·∫°t' style='max-width: 100%; height: auto;'>",
            text: "H√¨nh ·∫£nh sau c√≥ th·ªÉ minh ho·∫° cho ƒëo·∫°n th∆° n√†o d∆∞·ªõi ƒë√¢y?",
            options: [
                "A. Nh·ªØng c√°nh ƒë·ªìng b√¨nh y√™n<br>N·∫±m ph∆°i m√¨nh ·ªü gi·ªØa<br>Nh·ªØng con s√¥ng xanh, h·ªìng<br>U·ªën quanh trƒÉm d·∫£i l·ª•a.",
                "B. Ch√∫ng em theo m·∫π<br>N√≥n l√° ra ƒë·ªìng<br>Ng√†n con su·ªëi nh·ªè<br>C√πng ch·∫£y v·ªÅ s√¥ng.",
                "C. L·ªùi ru c√≥ gi√≥ m√πa thu<br>B√†n tay m·∫π qu·∫°t m·∫π ƒë∆∞a gi√≥ v·ªÅ<br>Nh·ªØng ng√¥i sao th·ª©c ngo√†i kia<br>Ch·∫≥ng b·∫±ng m·∫π ƒë√£ th·ª©c v√¨ ch√∫ng con."
            ],
            answer: 2
        },
        {
            id: 16, type: "multiple",
            imageText: "<img src='image/cau18.jpg' alt='·∫¢nh b√© g√°i ƒÉn d∆∞a h·∫•u' style='max-width: 100%; height: auto;'>",
            text: "H√¨nh ·∫£nh sau th√≠ch h·ª£p m√¥ t·∫£ c√¢u t·ª•c ng·ªØ n√†o?",
            options: [
                "A. U·ªëng n∆∞·ªõc nh·ªõ ngu·ªìn.",
                "B. ƒÇn qu·∫£ nh·ªõ k·∫ª tr·ªìng c√¢y.",
                "C. ƒÇn tr√¥ng n·ªìi ng·ªìi tr√¥ng h∆∞·ªõng.",
                "D. H·ªçc ƒÉn, h·ªçc n√≥i, h·ªçc g√≥i, h·ªçc m·ªü."
            ],
            answer: 1
        },
        {
            id: 17, type: "multiple",
            imageText: "<img src='image/cau25.jpg' alt='Gh√©p v·∫ßn' style='max-width: 100%; height: auto;'>",
            text: "H√£y gh√©p h√¨nh ·∫£nh v·ªõi v·∫ßn t∆∞∆°ng ·ª©ng:",
            options: ["A. 1b 2c 3a", "B. 1c 2b 3a", "C. 1a 2c 3b"],
            answer: 2
        },
        {
            id: 18, type: "arrange",
            text: "S·∫Øp x·∫øp c√°c ch·ªØ sau ƒë·ªÉ t·∫°o th√†nh t·ª´ ch·ªâ ngh·ªÅ nghi·ªáp. (Nh·∫•n v√†o c√°c ch·ªØ c√°i b√™n d∆∞·ªõi ƒë·ªÉ gh√©p)",
            letters: ['i', 'P', 'h', 'c', 'g', '√¥', 'n'],
            correctAnswer: "Phic√¥ng",
            displayAnswer: "Phi c√¥ng"
        }
    ];

    const quizContainer = document.getElementById('quiz-container');

    function moveLetter(element, targetId, originId) {
        const parentId = element.parentElement.id;
        if (parentId === originId) {
            document.getElementById(targetId).appendChild(element);
        } else {
            document.getElementById(originId).appendChild(element);
        }
    }

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
    }

    function loadQuiz() {
        quizContainer.innerHTML = '';
        
        quizData.forEach((q, index) => {
            const questionElement = document.createElement('div');
            questionElement.className = 'question-card';
            
            let htmlContent = `<div class="question-title">C√¢u ${index + 1}: ${q.text}</div>`;
            
            if (q.imageText) {
                htmlContent += `<div class="image-placeholder">${q.imageText}</div>`; 
            }

            if (q.type === "multiple") {
                htmlContent += `<ul class="options-list">`;
                q.options.forEach((opt, optIndex) => {
                    htmlContent += `
                        <li class="option-item">
                            <label class="option-label" id="label-q${index}-o${optIndex}">
                                <input type="radio" name="question${index}" value="${optIndex}">
                                <span>${opt}</span>
                            </label>
                        </li>
                    `;
                });
                htmlContent += `</ul>`;
            } else if (q.type === "arrange") {
                htmlContent += `
                    <div class="arrange-container" id="arrange-container-${index}">
                        <span class="arrange-label">üëá T√∫i h·∫°t gi·ªëng ch·ªØ c√°i:</span>
                        <div class="letters-pool" id="pool-q${index}">
                `;
                let shuffledLetters = [...q.letters];
                shuffleArray(shuffledLetters);
                
                shuffledLetters.forEach((letter) => {
                    htmlContent += `<span class="letter-tile" onclick="moveLetter(this, 'answer-q${index}', 'pool-q${index}')">${letter}</span>`;
                });
                htmlContent += `
                        </div>
                        <span class="arrange-label">üå± M·∫£nh ƒë·∫•t gieo tr·ªìng:</span>
                        <div class="answer-box" id="answer-q${index}"></div>
                        <div class="correct-text-msg" id="msg-q${index}">${q.displayAnswer}</div>
                    </div>
                `;
            }

            questionElement.innerHTML = htmlContent;
            quizContainer.appendChild(questionElement);
        });

        document.getElementById('result-box').style.display = 'none';
        document.getElementById('resetBtn').style.display = 'none';
        document.getElementById('submitBtn').style.display = 'block';
    }

    function submitQuiz() {
        const studentNameInput = document.getElementById('studentName');
        const studentClassInput = document.getElementById('studentClass');
        const studentName = studentNameInput.value.trim();
        const studentClass = studentClassInput.value.trim();

        if (studentName === "" || studentClass === "") {
            alert("Em vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß H·ªç v√† t√™n v√† L·ªõp tr∆∞·ªõc khi n·ªôp b√†i nh√©!");
            if(studentName === "") studentNameInput.focus();
            else studentClassInput.focus();
            document.querySelector('.student-info-card').scrollIntoView({ behavior: 'smooth', block: 'center' });
            return; 
        }

        const btn = document.getElementById('submitBtn');
        btn.innerText = "‚è≥ ƒêang ch·∫•m b√†i v√† g·ª≠i ƒëi·ªÉm...";
        btn.classList.add('loading');

        let score = 0;
        
        quizData.forEach((q, index) => {
            if (q.type === "multiple") {
                const selectedOption = document.querySelector(`input[name="question${index}"]:checked`);
                
                q.options.forEach((_, optIndex) => {
                    document.getElementById(`label-q${index}-o${optIndex}`).classList.remove('correct-answer', 'wrong-answer');
                });

                if (selectedOption) {
                    const selectedValue = parseInt(selectedOption.value);
                    document.getElementById(`label-q${index}-o${q.answer}`).classList.add('correct-answer');
                    if (selectedValue === q.answer) {
                        score++;
                    } else {
                        document.getElementById(`label-q${index}-o${selectedValue}`).classList.add('wrong-answer');
                    }
                } else {
                    document.getElementById(`label-q${index}-o${q.answer}`).classList.add('correct-answer');
                }
            } else if (q.type === "arrange") {
                const answerBox = document.getElementById(`answer-q${index}`);
                const userWord = Array.from(answerBox.children).map(span => span.innerText).join('');
                
                if (userWord.toLowerCase() === q.correctAnswer.toLowerCase()) {
                    score++;
                    answerBox.style.backgroundColor = '#C8E6C9';
                    answerBox.style.borderColor = '#2E7D32';
                } else {
                    answerBox.style.backgroundColor = '#FFCDD2';
                    answerBox.style.borderColor = '#C62828';
                    document.getElementById(`msg-q${index}`).style.display = 'block';
                }
            }
        });

        const storageKey = `quiz_attempts_${studentName.replace(/\s+/g, '')}_${studentClass.replace(/\s+/g, '')}`;
        let attempts = parseInt(localStorage.getItem(storageKey)) || 0;
        attempts += 1;
        localStorage.setItem(storageKey, attempts);

        let formData = new FormData();
        formData.append("name", studentName);
        formData.append("studentClass", studentClass);
        formData.append("score", score + "/" + quizData.length);
        formData.append("attempts", attempts);

        if (scriptURL.includes('https://script.google.com/macros/s/AKfycbxRA-yjp6i3c1FkUygNdWfGifXgLOV6UAPp3fB4MjjTZCvKLakwUcSJTrrrCWDpSgcD/exec')) {
             console.warn('Ch∆∞a d√°n link Google Sheets, kh√¥ng th·ªÉ g·ª≠i ƒëi·ªÉm.');
             hienThiKetQua(studentName, studentClass, score, attempts, btn);
        } else {
            fetch(scriptURL, { method: 'POST', body: formData, mode: 'no-cors' })
                .then(response => {
                    console.log('ƒê√£ g·ª≠i ƒëi·ªÉm th√†nh c√¥ng!');
                    hienThiKetQua(studentName, studentClass, score, attempts, btn);
                })
                .catch(error => {
                    console.error('L·ªói m·∫°ng, nh∆∞ng v·∫´n hi·ªán ƒëi·ªÉm:', error.message);
                    hienThiKetQua(studentName, studentClass, score, attempts, btn); 
                });
        }
    }

    function hienThiKetQua(studentName, studentClass, score, attempts, btn) {
        const resultBox = document.getElementById('result-box');
        resultBox.style.display = 'block';
        
        let icon = score === quizData.length ? 'üåü Xu·∫•t s·∫Øc! üåü' : (score > quizData.length / 2 ? 'üéâ L√†m t·ªët l·∫Øm! üéâ' : 'üí™ C·ªë g·∫Øng h∆°n nh√©! üí™');
        
        resultBox.innerHTML = `
            <h2>${icon}</h2>
            <div class="result-stat"><span class="stat-icon">üë§</span> <span><strong>H·ªç v√† t√™n:</strong> ${studentName}</span></div>
            <div class="result-stat"><span class="stat-icon">üè´</span> <span><strong>L·ªõp:</strong> ${studentClass}</span></div>
            <div class="result-stat"><span class="stat-icon">üéØ</span> <span><strong>S·ªë c√¢u ƒë√∫ng:</strong> <span style="color: var(--flower-pink); font-size: 1.2em;">${score} / ${quizData.length}</span></span></div>
            <div class="result-stat"><span class="stat-icon">üîÑ</span> <span><strong>S·ªë l·∫ßn n·ªôp b√†i:</strong> ${attempts} l·∫ßn</span></div>
            <p style="text-align: center; margin-top: 25px; font-size: 1.1em; color: #5D4037; font-family: var(--font-hand);">
                <em>(C√°c c√¢u l√†m sai ƒë√£ ƒë∆∞·ª£c ƒë√°nh d·∫•u m√†u ƒë·ªè v√† hi·ªán ƒë√°p √°n ƒë√∫ng m√†u xanh r·ªìi ƒë√≥!)</em>
            </p>
        `;
        
        btn.innerText = "üåª N·ªôp B√†i & Thu Ho·∫°ch üåª";
        btn.classList.remove('loading');
        document.getElementById('submitBtn').style.display = 'none';
        document.getElementById('resetBtn').style.display = 'block';

        resultBox.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    function resetQuiz() {
        shuffleArray(quizData);
        loadQuiz();
        document.querySelector('.student-info-card').scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    window.onload = loadQuiz;
</script>

</body>
</html>